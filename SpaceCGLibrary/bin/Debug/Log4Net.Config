<?xml version="1.0" encoding="utf-8" ?>
<configuration>

    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    </configSections>

    <!-- Config Examples : http://logging.apache.org/log4net/release/config-examples.html -->
    <!-- ConversionPattern 参考：https://blog.csdn.net/binnygoal/article/details/79557746 -->
    <log4net>
        <!--日志文本文件 输出 -->
        <appender  name="LogFileAppender" type="log4net.Appender.RollingFileAppender,log4net" >
            <param name="File" value="Logs/" />
            <!--是否是向文件中追加日志-->
            <param name="AppendToFile" value="true" />
            <!--最大的文件大小-->
            <param name="MaximumFileSize" value="4MB" />
            <!--当日志文件达到MaxFileSize大小，就自动创建备份文件-->
            <param name= "MaxSizeRollBackups" value="4" />
            <!--按照何种方式产生多个日志文件(日期[Date],文件大小[Size],混合[Composite])-->
            <param name="RollingStyle" value="Date" />
            <!--日志文件名格式 yyyy-MM-dd.log-->
            <param name="DatePattern" value="yyyy-MM-dd'.log'" />
            <!--日志文件名是否是固定不变的-->
            <param name="StaticLogFileName" value="false" />
            <!--使用Unicode编码-->
            <Encoding value="UTF-8" />
            <!--记录日志写入文件时，不锁定文本文件，防止多线程时不能写Log,官方说线程非安全-->
            <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
            <!--定义输出布局风格-->
            <layout type="log4net.Layout.PatternLayout,log4net">
                <param name="ConversionPattern" value="[%date{HH:mm:ss}] [%thread] %-5level %logger [%method(%line)] - %message (%r) %newline" />
                <param name="Header" value="[Header]&#13;&#10;" />
                <param name="Footer" value="[Footer]&#13;&#10;&#13;&#10;" />
            </layout>
        </appender>

        <!--控制台程序 输出 -->
        <appender name="ColoredConsoleAppender" type="log4net.Appender.ColoredConsoleAppender">
            <mapping>
                <level value="ERROR" />
                <foreColor value="Red" />
            </mapping>
            <mapping>
                <level value="WARN" />
                <foreColor value="Yellow" />
            </mapping>
            <mapping>
                <level value="INFO" />
                <foreColor value="White" />
            </mapping>
            <mapping>
                <level value="DEBUG" />
                <foreColor value="Blue" />
            </mapping>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="[%date{yyyy-MM-dd HH:mm:ss}] [%thread] %-5level %logger [%method(%line)] - %message (%r) %newline" />
            </layout>
            <filter type="log4net.Filter.LevelRangeFilter">
                <param name="LevelMin" value="Info" />
                <param name="LevelMax" value="Fatal" />
            </filter>
        </appender>

        <!-- UDP 远程输出 -->
        <appender name="UdpAppender" type="log4net.Appender.UdpAppender">
            <localPort value="6667" />
            <remoteAddress value="127.0.0.1" />
            <remotePort value="6666" />
            <layout type="log4net.Layout.PatternLayout, log4net">
                <conversionPattern value="[%date{yyyy-MM-dd HH:mm:ss}] [%thread] %-5level %logger [%method(%line)] - %message (%r) %newline" />
            </layout>
        </appender>

        <!-- Trace 输出 -->
        <appender name="TraceAppender" type="log4net.Appender.TraceAppender">
            <layout type="log4net.Layout.PatternLayout, log4net">
                <conversionPattern value="Trace:[%date{yyyy-MM-dd HH:mm:ss}] [%thread] %-5level %logger [%method(%line)] - %message (%r) %newline" />
            </layout>
        </appender>
        <!-- Console 输出 -->
        <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
            <layout type="log4net.Layout.PatternLayout, log4net">
                <conversionPattern value="[%date{yyyy-MM-dd HH:mm:ss}] [%thread] %-5level %logger [%method(%line)] - %message (%r) %newline" />
            </layout>
        </appender>
        <!-- Debug 输出 -->
        <appender name="DebugStringAppender" type="log4net.Appender.OutputDebugStringAppender" >
            <layout type="log4net.Layout.PatternLayout, log4net">
                <conversionPattern value="Debug:[%date{HH:mm:ss}] [%thread] %-5level %logger [%method(%line)] - %message (%r) %newline" />
            </layout>
        </appender>

        <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender,log4net">
            <to value="huangmin@spacecg.cn" />
            <from value="liaoyunhui@spacecg.cn" />
            <username value="liaoyunhui@spacecg.cn" />
            <!--授权码(非密码)-->
            <password value="9XZeuSzznTSBiENU" />
            <subject value="XX位置XX项目日志信息" />
            <!-- SmtpHost 使用SSL(具体看邮件服务器是否开启 SSL ) -->
            <enableSsl value="true" />
            <authentication value="Basic" />
            <smtpHost value="smtp.exmail.qq.com" />            
            <!-- 未达到 bufferSize 大小信息将被丢弃 -->
            <lossy value="true" />
            <bufferSize value="32" />
            <evaluator type="log4net.Core.LevelEvaluator">
                <threshold value="WARN"/>
            </evaluator>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="[%date{yyyy-MM-dd HH:mm:ss}] [%thread] %-5level [%method(%line)] %logger [%ndc] - %message (%r) %newline" />
            </layout>
        </appender>

        <!--Root Logger-->
        <root>
            <!--
            日志等级：
            FATAL（致命错误）：记录系统中出现的能使用系统完全失去功能，服务停止，系统崩溃等使系统无法继续运行下去的错误。例如，数据库无法连接，系统出现死循环。
            ERROR（一般错误）：记录系统中出现的导致系统不稳定，部分功能出现混乱或部分功能失效一类的错误。例如，数据字段为空，数据操作不可完成，操作出现异常等。
            WARN（警告）：记录系统中不影响系统继续运行，但不符合系统运行正常条件，有可能引起系统错误的信息。例如，记录内容为空，数据内容不正确等。
            INFO（一般信息）：记录系统运行中应该让用户知道的基本信息。例如，服务开始运行，功能已经开户等。
            DEBUG （调试信息）：记录系统用于调试的一切信息，内容或者是一些关键数据内容的输出。
            -->
            <level value="ALL" />
            <appender-ref ref="UdpAppender"/>
            <appender-ref ref="LogFileAppender" />
            <!--appender-ref ref="ColoredConsoleAppender"/-->
            <appender-ref ref="SmtpAppender" />

            <!--appender-ref ref="TraceAppender" /-->
            <appender-ref ref="ConsoleAppender" />
            <appender-ref ref="DebugStringAppender"/>
            <param name="ConversionPattern" value="[%date{yyyy-MM-dd HH:mm:ss}] [%thread] %-5level [%method(%line)] %logger [%ndc] - %message (%r) %newline" />
        </root>
    </log4net>
</configuration>